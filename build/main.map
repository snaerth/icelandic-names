{"version":3,"sources":["webpack:///webpack/bootstrap ff801fb43e2641901bea","webpack:///./src/utils/fileHelpers.js","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"cron\"","webpack:///external \"fs\"","webpack:///external \"mkdirp\"","webpack:///./src/services/nameScraper.js","webpack:///external \"cheerio\"","webpack:///./src/database/icelandic.js","webpack:///./src/database/index.js","webpack:///external \"pg\"","webpack:///./src/config/index.js","webpack:///external \"dotenv\"","webpack:///./src/utils/parseDeclesionNameRes.js","webpack:///./src/utils/capitalizeFirstLetter.js","webpack:///./src/utils/fetchHtml.js","webpack:///external \"node-fetch\"","webpack:///./src/utils/createUUID.js","webpack:///external \"uuid/v3\"","webpack:///./src/utils/splitToChunks.js"],"names":["readFileAsync","path","opts","Promise","resolve","reject","fs","readFile","err","data","writeFileAsync","writeFile","readDirAsync","readdir","filenames","existsSyncAsync","exists","existsSync","Error","createDirectorys","dir","mkdirp","error","process","env","JSON","parse","stringify","app","express","CronJob","finishedScrapingMessage","initScraper","console","log","Date","toDateString","get","req","res","status","json","code","parsedData","boys","girls","middle","listen","PORT","CHEERIO_OPTIONS","normalizeWhitespace","getLetterIndexesAndAlhpabet","list","alphabet","i","letterIndexes","reduce","acc","curr","name","undefined","push","getDataFromList","$","arr","map","el","returnValue","children","length","text","trim","obj","id","createUUID","verdict","declesions","subtitle","toArray","getNameDeclesionsForList","promisesArr","valuesArr","getDeclensionByName","promisesChunks","splitToChunks","tempValues","all","j","parseNamesHtml","html","cheerio","load","nameTypeList","boysNamesObj","find","girlsNamesObj","middleNamesObj","boysNamesList","girlsNamesList","middleNamesList","boysLen","girlsLen","middleLen","mergedList","tempList","splice","cb","url","fetchHTML","str","rows","dbQuery","capitalizeFirstLetter","parseDeclesionNameRes","DB_USER","DB_HOST","DB_DATABASE","DB_PASSWORD","DB_PORT","pool","user","host","database","password","port","params","start","now","query","duration","dotenv","config","row","greiningarstrengur","beygingarmynd","test","charAt","toUpperCase","slice","fetch","timeout","MY_NAMESPACE_UUID","uuidv3","chunk","chunkArr"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ff801fb43e2641901bea","import fs from 'fs';\nimport mkdirp from 'mkdirp';\n\n/**\n * Native async / await for reading file in node\n * @param {String} path - fs.readFile path\n * @param {String} opts - fs.readFile options\n */\nexport function readFileAsync(path, opts = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.readFile(path, opts, (err, data) => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve(data);\n    });\n  });\n}\n\n/**\n * Native async / await for writing file in node\n * @param {String} path - fs.readFile path\n * @param {String} data - file content\n * @param {String} opts - fs.readFile options\n */\nexport function writeFileAsync(path, data, opts = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.writeFile(path, data, opts, (err) => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve();\n    });\n  });\n}\n\n/**\n * Native async / await for reading directorys in node\n * @param {String} path - fs.readFile path\n */\nexport function readDirAsync(path) {\n  return new Promise((resolve, reject) => {\n    fs.readdir(path, (err, filenames) => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve(filenames);\n    });\n  });\n}\n\n/**\n * Native async / await for checking if file exists in node\n * @param {String} path - fs.readFile path\n */\nexport function existsSyncAsync(path) {\n  return new Promise((resolve, reject) => {\n    const exists = fs.existsSync(path);\n\n    if (exists) {\n      return resolve(true);\n    }\n\n    return reject(new Error(false));\n  });\n}\n\n/**\n * Native async / await for creating directorys in node\n * @param {String} dir - directorys path\n */\nexport function createDirectorys(dir) {\n  return new Promise((resolve, reject) => {\n    try {\n      return fs.exists(dir, async (exists) => {\n        if (!exists) {\n          await mkdirp(dir);\n        }\n\n        return resolve(dir);\n      });\n    } catch (error) {\n      return reject(error);\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fileHelpers.js","import express from 'express';\nimport cron from 'cron';\nimport { readFileAsync } from './utils/fileHelpers';\nimport initScraper from './services/nameScraper';\n\nprocess.env = JSON.parse(JSON.stringify(process.env));\n\nconst app = express();\nconst { CronJob } = cron;\nconst finishedScrapingMessage = 'Icelandic name scraper finished scaping data at: ';\n\n// Tasks runs job as soon as it ticks over to the new month at 00:00 hours\nCronJob(\n  '0 0 1 * *',\n  async () => {\n    await initScraper();\n    /* eslint-disable-next-line no-console */\n    console.log(finishedScrapingMessage, new Date().toDateString());\n  },\n  null,\n  true,\n  'Atlantic/Reykjavik',\n);\n\n// IFEE to execute scaper\n(async () => {\n  await initScraper();\n  /* eslint-disable-next-line no-console */\n  console.log(finishedScrapingMessage, new Date().toDateString());\n})();\n\n/**\n * Gets all names\n */\napp.get('/names', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n\n    return res.status(200).json(JSON.parse(data));\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n\n      return res.status(200).json(JSON.parse(data));\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all boys names\n */\napp.get('/names/boys', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.boys);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.boys);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all girls names\n */\napp.get('/names/girls', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.girls);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.girls);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all middle names\n */\napp.get('/names/middle', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.middle);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.middle);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n// eslint-disable-next-line\napp.listen(process.env.PORT, () => console.log(`Server listening on port ${process.env.PORT}`));\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 3\n// module chunks = 0","module.exports = require(\"cron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cron\"\n// module id = 4\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 6\n// module chunks = 0","import cheerio from 'cheerio';\nimport getDeclensionByName from '../database/icelandic';\nimport fetchHTML from '../utils/fetchHtml';\nimport createUUID from '../utils/createUUID';\nimport { writeFileAsync } from '../utils/fileHelpers';\nimport splitToChunks from '../utils/splitToChunks';\n\nconst CHEERIO_OPTIONS = { normalizeWhitespace: true };\n\n/**\n * Creates letter indexes and alhpabet array\n * @param {Array} list - list of names object\n * @returns {Object}\n */\nfunction getLetterIndexesAndAlhpabet(list) {\n  const alphabet = [];\n  let i = 0;\n\n  const letterIndexes = list.reduce((acc, curr) => {\n    if (acc[curr.name[0]] === undefined) {\n      acc[curr.name[0]] = i;\n      alphabet.push(curr.name[0]);\n    }\n\n    i += 1;\n    return acc;\n  }, {});\n\n  return {\n    alphabet,\n    letterIndexes,\n    list,\n  };\n}\n\n/**\n * Gets names data from Cheerio parsed html object\n *\n * @param {Function} $ - Cheerio function reference\n * @param {Object} arr - Cheerio parsed html object\n * @returns {Array}\n */\nfunction getDataFromList($, arr) {\n  return arr\n    .map((i, el) => {\n      let returnValue;\n\n      if (el.children.length > 0) {\n        const name = $(el.children[0])\n          .text()\n          .trim();\n        const obj = {\n          id: createUUID(name),\n          name,\n          verdict: null,\n          declesions: null,\n        };\n\n        if (el.children.length > 1) {\n          const subtitle = $(el.children[1])\n            .text()\n            .trim();\n\n          if (subtitle) {\n            obj.subtitle = subtitle;\n          }\n        }\n\n        returnValue = obj;\n      }\n\n      return returnValue;\n    })\n    .toArray();\n}\n\n/**\n * Gets name declesions for every name in list and\n * returns list with new property declesions\n *\n * @param {Array<Object>} list - Array of objects\n * @returns {Array<Object>}\n */\nasync function getNameDeclesionsForList(list) {\n  const arr = list;\n  const promisesArr = [];\n  const valuesArr = [];\n\n  try {\n    // Create all promises\n    for (let i = 0; i < arr.length; i += 1) {\n      promisesArr.push(getDeclensionByName(arr[i].name));\n    }\n\n    // Split promises into array chunks with 10 items in each chunk\n    const promisesChunks = splitToChunks(promisesArr, 10);\n\n    // Execute parallel 10 promises at a time and\n    // wait for each chunk to finish.\n    // By doing this we minimize load on the server\n    for (let i = 0; i < promisesChunks.length; i += 1) {\n      const tempValues = await Promise.all(promisesChunks[i]); // eslint-disable-line no-await-in-loop\n\n      for (let j = 0; j < tempValues.length; j += 1) {\n        valuesArr.push(tempValues[j]);\n      }\n    }\n\n    // Add values from promises to arr\n    for (let i = 0; i < valuesArr.length; i += 1) {\n      arr[i].declesions = valuesArr[i];\n    }\n\n    return arr;\n  } catch (error) {\n    return new Error(error);\n  }\n}\n\n/**\n * Parses html for Icelandic names\n *\n * @param {String} html - Html text string\n * @returns {Promise<Object>}\n */\nfunction parseNamesHtml(html) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const $ = cheerio.load(html, CHEERIO_OPTIONS);\n      const nameTypeList = $('.nafnalisti .nametype');\n      const boysNamesObj = $(nameTypeList[0]).find('ul.dir li');\n      const girlsNamesObj = $(nameTypeList[1]).find('ul.dir li');\n      const middleNamesObj = $(nameTypeList[2]).find('ul.dir li');\n      let boysNamesList = getDataFromList($, boysNamesObj);\n      let girlsNamesList = getDataFromList($, girlsNamesObj);\n      let middleNamesList = getDataFromList($, middleNamesObj);\n      const boysLen = boysNamesList.length;\n      const girlsLen = girlsNamesList.length;\n      const middleLen = middleNamesList.length;\n      const mergedList = [...boysNamesList, ...girlsNamesList, ...middleNamesList];\n      // Add declesions to items in list\n      const tempList = await getNameDeclesionsForList(mergedList);\n\n      // Split list up again. Now with declesions\n      boysNamesList = tempList.splice(0, boysLen);\n      girlsNamesList = tempList.splice(boysLen, boysLen + girlsLen);\n      middleNamesList = tempList.splice(boysLen + girlsLen, boysLen + girlsLen + middleLen);\n\n      return resolve({\n        boys: getLetterIndexesAndAlhpabet(boysNamesList),\n        girls: getLetterIndexesAndAlhpabet(girlsNamesList),\n        middle: getLetterIndexesAndAlhpabet(middleNamesList),\n      });\n    } catch (error) {\n      return reject(error);\n    }\n  });\n}\n\n/**\n * Initializes Icelandic names scraper\n */\nexport default async function initScraper(cb) {\n  try {\n    const url = 'https://www.island.is/mannanofn/leit-ad-nafni/?Nafn=&Stulkur=on&Drengir=on&Millinofn=on';\n    const html = await fetchHTML(url);\n    const data = await parseNamesHtml(html);\n    await writeFileAsync('./data/names.json', JSON.stringify(data));\n    return true;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/nameScraper.js","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 8\n// module chunks = 0","import dbQuery from './index';\nimport parseDeclesionNameRes from '../utils/parseDeclesionNameRes';\nimport capitalizeFirstLetter from '../utils/capitalizeFirstLetter';\n\n/**\n * Fetches data from database for Icelandic name declesion (fallbeygingar)\n *\n * @param {String} name - Name string\n * @returns {Array<String>}\n */\nexport default async function getDeclensionByName(str) {\n  try {\n    // Get declesion by name\n    const { rows } = await dbQuery('SELECT * FROM bin WHERE uppflettiord = $1', [\n      capitalizeFirstLetter(str),\n    ]);\n\n    // Parse response\n    const parsedData = parseDeclesionNameRes(rows);\n\n    return parsedData;\n  } catch (error) {\n    return new Error(error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/database/icelandic.js","import { Pool } from 'pg';\nimport config from '../config';\n\nconst {\n  DB_USER, DB_HOST, DB_DATABASE, DB_PASSWORD, DB_PORT,\n} = config;\n\n// Set connection options for Postgresql\nconst pool = new Pool({\n  user: DB_USER,\n  host: DB_HOST,\n  database: DB_DATABASE,\n  password: DB_PASSWORD,\n  port: DB_PORT,\n});\n\n/**\n * Postgresql pool query for executing queries\n *\n * @param {String} text - Query text\n * @param {Array} params - Query values\n * @returns {Object}\n */\nexport default async function dbQuery(text, params) {\n  const start = Date.now();\n\n  try {\n    const { rows } = await pool.query(text, params);\n    const duration = Date.now() - start;\n\n    return { query: text, duration, rows };\n  } catch (error) {\n    return new Error(error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/database/index.js","module.exports = require(\"pg\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pg\"\n// module id = 11\n// module chunks = 0","// Eviromental variables\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nconst {\n  DB_USER, DB_HOST, DB_DATABASE, DB_PASSWORD, DB_PORT,\n} = process.env;\n\nconst config = {\n  DB_USER,\n  DB_HOST,\n  DB_DATABASE,\n  DB_PASSWORD,\n  DB_PORT,\n};\n\nexport default config;\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/index.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 13\n// module chunks = 0","/**\n * Parses Database query response from table bin\n *\n * @param {Array} row\n * @returns {Array} only containing declesions\n * @example parseDeclesionNameRes(rows) => ['Snær','Snæ', 'Snæ', 'Snæs']\n */\nexport default function parseDeclesionNameRes(row) {\n  const arr = [];\n\n  for (let i = 0; i < row.length; i += 1) {\n    const { greiningarstrengur, beygingarmynd } = row[i];\n\n    if (/^NFET$/.test(greiningarstrengur)) {\n      arr[0] = beygingarmynd;\n    } else if (/^ÞFET$/.test(greiningarstrengur)) {\n      arr[1] = beygingarmynd;\n    } else if (/^ÞGFET$/.test(greiningarstrengur)) {\n      arr[2] = beygingarmynd;\n    } else if (/^EFET$/.test(greiningarstrengur)) {\n      arr[3] = beygingarmynd;\n    }\n  }\n\n  return arr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/parseDeclesionNameRes.js","/**\n * Capitalizes first letter in string\n *\n * @param {String} string\n * @returns {String} with first letter capatalized\n */\nexport default function capitalizeFirstLetter(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/capitalizeFirstLetter.js","import fetch from 'node-fetch';\n\n/**\n * Fetches HTML string from desired page\n *\n * @param {String} url - Website url\n * @returns {String} HTML string\n */\nexport default async function fetchHTML(url) {\n  try {\n    const res = await fetch(url, { timeout: 3000 });\n    const html = await res.text();\n    return html;\n  } catch (error) {\n    return error;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fetchHtml.js","module.exports = require(\"node-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-fetch\"\n// module id = 17\n// module chunks = 0","import uuidv3 from 'uuid/v3';\n\n// Note: Custom namespaces should be a UUID string specific to your application!\n// E.g. the one here was generated using this modules `uuid` CLI.\nconst MY_NAMESPACE_UUID = '1b671a64-40d5-491e-99b0-da01ff1f3341';\n\n/**\n * Creates unique ID from string\n * @param {String} str\n * @returns {String} UUID\n * @example createUUID('Name') => 'aca84bc6-021c-3169-a634-52a2761f2ad6'\n */\nexport default function createUUID(str) {\n  return uuidv3(str, MY_NAMESPACE_UUID);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/createUUID.js","module.exports = require(\"uuid/v3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid/v3\"\n// module id = 19\n// module chunks = 0","/**\n * Splits array into chunks\n * For example splitToChunks([1,2,3,4,5,6,7,8,9], 3)\n *\n * @param {Array} array - Array of anything\n * @param {Number} chunk - Size of chunk\n * @returns {Array<Array>}\n * @example splitToChunks([1,2,3,4,5,6,7,8,9], 3) => [[1,2,3],[4,5,6],[7,8,9]]\n */\nexport default function splitToChunks(arr, chunk) {\n  const chunkArr = [];\n\n  for (let i = 0; i < arr.length; i += chunk) {\n    chunkArr.push(arr.slice(i, i + chunk));\n  }\n\n  return chunkArr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/splitToChunks.js"],"sourceRoot":""}