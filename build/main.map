{"version":3,"sources":["webpack:///webpack/bootstrap d3067a4001dc250f5c83","webpack:///./src/utils/fileHelpers.js","webpack:///external \"cheerio\"","webpack:///./src/utils/fetchHtml.js","webpack:///./src/index.js","webpack:///external \"express\"","webpack:///external \"cron\"","webpack:///external \"fs\"","webpack:///external \"mkdirp\"","webpack:///./src/services/nameScraper.js","webpack:///./src/services/declensionScraper.js","webpack:///external \"node-fetch\"","webpack:///./src/utils/createUUID.js","webpack:///external \"uuid/v3\"","webpack:///./src/utils/delayPromiseBatches.js","webpack:///./src/utils/splitToChunks.js","webpack:///./src/database/index.js","webpack:///external \"pg\"","webpack:///./src/config/index.js","webpack:///external \"dotenv\""],"names":["readFileAsync","path","opts","Promise","resolve","reject","fs","readFile","err","data","writeFileAsync","writeFile","readDirAsync","readdir","filenames","existsSyncAsync","exists","existsSync","createDirectorys","dir","mkdirp","error","fetchHTML","url","res","fetch","timeout","html","text","process","env","JSON","parse","stringify","app","express","CronJob","cron","dbQuery","get","req","status","json","code","parsedData","boys","girls","middle","listen","PORT","console","log","CHEERIO_OPTIONS","normalizeWhitespace","getLetterIndexesAndAlhpabet","list","alphabet","i","letterIndexes","reduce","acc","curr","name","undefined","push","getDataFromList","$","arr","map","el","children","length","trim","obj","id","createUUID","verdict","declesions","subtitle","toArray","parseNamesHtml","cheerio","load","nameTypeList","boysNamesObj","find","girlsNamesObj","middleNamesObj","boysNamesList","girlsNamesList","middleNamesList","boysLen","girlsLen","middleLen","mergedList","tempList","getNameDeclesionsForList","splice","chunkSize","promises","getNameDeclension","declesionsList","delayPromiseBatches","Array","isArray","Error","initScraper","parseNameDeclensionFirstResponse","ul","responseVal","each","li","toLowerCase","split","includes","onClickAttrVal","attr","match","getTableRowHtml","trChild","getValuesFromRow","rowValue","e","join","parseNameDeclensions","declesionArr","nfEl","þfEl","þgfEl","efEl","nf","þf","þgf","ef","prepareNameDeclension","nextHtml","encodeURIComponent","parsedHTML","MY_NAMESPACE_UUID","str","uuidv3","delayMs","promisesInChunks","splitToChunks","resolvedPromiseChunks","setTimeout","tempChunkValues","all","concat","apply","chunk","chunkArr","slice","DB_USER","DB_HOST","DB_DATABASE","DB_PASSWORD","DB_PORT","pool","user","host","database","password","port","params","start","Date","now","rows","query","end","duration","dotenv","config"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap d3067a4001dc250f5c83","import fs from 'fs';\nimport mkdirp from 'mkdirp';\n\n/**\n * Native async / await for reading file in node\n * @param {String} path - fs.readFile path\n * @param {String} opts - fs.readFile options\n */\nexport function readFileAsync(path, opts = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.readFile(path, opts, (err, data) => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve(data);\n    });\n  });\n}\n\n/**\n * Native async / await for writing file in node\n * @param {String} path - fs.readFile path\n * @param {String} data - file content\n * @param {String} opts - fs.readFile options\n */\nexport function writeFileAsync(path, data, opts = 'utf8') {\n  return new Promise((resolve, reject) => {\n    fs.writeFile(path, data, opts, err => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve();\n    });\n  });\n}\n\n/**\n * Native async / await for reading directorys in node\n * @param {String} path - fs.readFile path\n */\nexport function readDirAsync(path) {\n  return new Promise((resolve, reject) => {\n    fs.readdir(path, (err, filenames) => {\n      if (err) {\n        return reject(err);\n      }\n\n      return resolve(filenames);\n    });\n  });\n}\n\n/**\n * Native async / await for checking if file exists in node\n * @param {String} path - fs.readFile path\n */\nexport function existsSyncAsync(path) {\n  return new Promise((resolve, reject) => {\n    const exists = fs.existsSync(path);\n    return exists ? resolve(true) : reject(false);\n  });\n}\n\n/**\n * Native async / await for creating directorys in node\n * @param {String} dir - directorys path\n */\nexport function createDirectorys(dir) {\n  return new Promise((resolve, reject) => {\n    try {\n      fs.exists(dir, async exists => {\n        if (!exists) {\n          await mkdirp(dir);\n        }\n\n        return resolve(dir);\n      });\n    } catch (error) {\n      return reject(`Failed to create directory ${dir}`);\n    }\n  });\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fileHelpers.js","module.exports = require(\"cheerio\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cheerio\"\n// module id = 1\n// module chunks = 0","import fetch from 'node-fetch';\n\n/**\n * Fetches HTML string from desired page\n *\n * @param {String} url - Website url\n * @returns {String} HTML string\n */\nexport default async function fetchHTML(url) {\n  try {\n    const res = await fetch(url, { timeout: 3000 });\n    const html = await res.text();\n    return html;\n  } catch (error) {\n    return error;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/fetchHtml.js","import express from 'express';\nimport cron from 'cron';\nimport { readFileAsync } from './utils/fileHelpers';\nimport initScraper from './services/nameScraper';\nimport { dbQuery } from './database';\n\n// https://github.com/facebook/react/issues/812#issuecomment-172929366\nprocess.env = JSON.parse(JSON.stringify(process.env));\n\n\nconst app = express();\nconst CronJob = cron.CronJob;\n// Tasks runs every day at 12:00 AM\n// new CronJob(\n//   '0 0 0 * * *',\n//   async () => {\n//     await initScraper();\n//     console.log('Icelandic name scraper finished scaping data at: ', new Date().toDateString());\n//   },\n//   null,\n//   true,\n//   'Atlantic/Reykjavik'\n// );\n\n//initScraper();\n\n// Connect to Postgresql database\ndbQuery('SELECT * from bin limit 10');\n\n/**\n * Gets all names\n */\napp.get('/names', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n\n    return res.status(200).json(JSON.parse(data));\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n\n      return res.status(200).json(JSON.parse(data));\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all boys names\n */\napp.get('/names/boys', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.boys);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.boys);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all girls names\n */\napp.get('/names/girls', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.girls);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.girls);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\n/**\n * Gets all middle names\n */\napp.get('/names/middle', async (req, res) => {\n  try {\n    const data = await readFileAsync('./data/names.json');\n    const parsedData = JSON.parse(data);\n    return res.status(200).json(parsedData.middle);\n  } catch (error) {\n    // If names.json dosen't exist\n    if (error.code === 'ENOENT') {\n      const data = await readFileAsync('./data/names_backup.json');\n      const parsedData = JSON.parse(data);\n      return res.status(200).json(parsedData.middle);\n    }\n\n    return res.status(500).json('Ups.. something went wrong');\n  }\n});\n\napp.listen(process.env.PORT, () => console.log(`Server listening on port ${process.env.PORT}`));\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","module.exports = require(\"express\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"express\"\n// module id = 5\n// module chunks = 0","module.exports = require(\"cron\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"cron\"\n// module id = 6\n// module chunks = 0","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 7\n// module chunks = 0","module.exports = require(\"mkdirp\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"mkdirp\"\n// module id = 8\n// module chunks = 0","import cheerio from 'cheerio';\nimport getNameDeclension from './declensionScraper';\nimport fetchHTML from '../utils/fetchHtml';\nimport createUUID from '../utils/createUUID';\nimport { writeFileAsync } from '../utils/fileHelpers';\nimport delayPromiseBatches from '../utils/delayPromiseBatches';\n\nconst CHEERIO_OPTIONS = { normalizeWhitespace: true };\n\n/**\n * Creates letter indexes and alhpabet array\n * @param {Array} list - list of names object { id: '4n5pxq24kpiob12og9', name: 'Jon', subtitle: 'More info' }\n * @returns {Object}\n */\nfunction getLetterIndexesAndAlhpabet(list) {\n  const alphabet = [];\n  let i = 0;\n\n  const letterIndexes = list.reduce((acc, curr) => {\n    if (acc[curr.name[0]] === undefined) {\n      acc[curr.name[0]] = i;\n      alphabet.push(curr.name[0]);\n    }\n\n    i += 1;\n    return acc;\n  }, {});\n\n  return {\n    alphabet,\n    letterIndexes,\n    list,\n  };\n}\n\n/**\n * Gets names data from Cheerio parsed html object\n *\n * @param {Function} $ - Cheerio function reference\n * @param {Object} arr - Cheerio parsed html object\n * @returns {Array}\n */\nfunction getDataFromList($, arr) {\n  return arr\n    .map((i, el) => {\n      if (el.children.length === 0) return;\n\n      const name = $(el.children[0])\n        .text()\n        .trim();\n      const obj = {\n        id: createUUID(name),\n        name,\n        verdict: null,\n        declesions: null,\n      };\n\n      if (el.children.length > 1) {\n        const subtitle = $(el.children[1])\n          .text()\n          .trim();\n\n        if (subtitle) {\n          obj.subtitle = subtitle;\n        }\n      }\n\n      return obj;\n    })\n    .toArray();\n}\n\n/**\n * Parses html for Icelandic names\n *\n * @param {String} html - Html text string\n * @returns {Promise<Object>}\n */\nfunction parseNamesHtml(html) {\n  return new Promise(async (resolve, reject) => {\n    try {\n      const $ = cheerio.load(html, CHEERIO_OPTIONS);\n      const nameTypeList = $('.nafnalisti .nametype');\n      const boysNamesObj = $(nameTypeList[0]).find('ul.dir li');\n      const girlsNamesObj = $(nameTypeList[1]).find('ul.dir li');\n      const middleNamesObj = $(nameTypeList[2]).find('ul.dir li');\n      let boysNamesList = getDataFromList($, boysNamesObj);\n      let girlsNamesList = getDataFromList($, girlsNamesObj);\n      let middleNamesList = getDataFromList($, middleNamesObj);\n      const boysLen = boysNamesList.length;\n      const girlsLen = girlsNamesList.length;\n      const middleLen = middleNamesList.length;\n      const mergedList = [...boysNamesList, ...girlsNamesList, ...middleNamesList];\n      // Add declesions to items in list\n      console.log('TempList before');\n      const tempList = await getNameDeclesionsForList(mergedList);\n      console.log('TempList after');\n\n      // Split list up again. Now with declesions\n      boysNamesList = tempList.splice(0, boysLen);\n      girlsNamesList = tempList.splice(boysLen, boysLen + girlsLen);\n      middleNamesList = tempList.splice(boysLen + girlsLen, boysLen + girlsLen + middleLen);\n\n      return resolve({\n        boys: getLetterIndexesAndAlhpabet(boysNamesList),\n        girls: getLetterIndexesAndAlhpabet(girlsNamesList),\n        middle: getLetterIndexesAndAlhpabet(middleNamesList),\n      });\n    } catch (error) {\n      console.log(error);\n      return reject(error);\n    }\n  });\n}\n\n/**\n * Gets name declesions for every name in list and\n * returns list with new gotten name declesions property\n *\n * @param {Array<Object>} list - Array of objects\n * @returns {Array<Object>}\n */\nasync function getNameDeclesionsForList(list) {\n  try {\n    const chunkSize = 10;\n    const promises = [];\n\n    // Iterate list and create multiple promises\n    for (let i = 0; i < list.length; i += 1) {\n      const name = list[i].name;\n      promises.push(getNameDeclension(name));\n    }\n\n    const declesionsList = await delayPromiseBatches(promises, chunkSize, 1000);\n\n    for (let i = 0; i < declesionsList.length; i += 1) {\n      if (Array.isArray(declesionsList[i]) && declesionsList[i].length > 0) {\n        list[i].declesions = declesionsList[i];\n      }\n    }\n\n    return list;\n  } catch (error) {\n    return new Error(error);\n  }\n}\n\n/**\n * Initializes Icelandic names scraper\n */\nexport default async function initScraper() {\n  // const test = await getNameDeclension('marteinn');\n  // console.log('test', test);\n  // return;\n  try {\n    const url =\n      'https://www.island.is/mannanofn/leit-ad-nafni/?Nafn=&Stulkur=on&Drengir=on&Millinofn=on';\n    const html = await fetchHTML(url);\n    const data = await parseNamesHtml(html);\n    await writeFileAsync('./data/names.json', JSON.stringify(data));\n    return true;\n  } catch (error) {\n    throw new Error(error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/nameScraper.js","import cheerio from 'cheerio';\nimport fetchHTML from '../utils/fetchHtml';\n\nconst CHEERIO_OPTIONS = { normalizeWhitespace: true };\n\n/**\n * Parses first response from Árnastofnun.\n * It Gets ID for the current name to make the next request\n *\n * @param {Function} $ - Cheerio function reference\n * @param {Object<Cheerio>} ul - Cherrio object\n * @returns {Number|null} responseVal\n */\nfunction parseNameDeclensionFirstResponse($, ul) {\n  let responseVal = null;\n\n  ul.each((i, li) => {\n    const arr = $(li)\n      .text()\n      .trim()\n      .toLowerCase()\n      .split(' ');\n\n    if (arr.includes('karlmannsnafn') || arr.includes('kvenmannsnafn')) {\n      const onClickAttrVal = $(li)\n        .find('a')\n        .attr('onclick');\n\n      responseVal = onClickAttrVal.match(/\\d+/g)[0];\n    }\n  });\n\n  return responseVal;\n}\n\n/**\n * Gets declesions html table row\n * @param {String|Number} trChild - HTML table row number\n * @returns {String}\n */\nfunction getTableRowHtml(trChild) {\n  return `.row-fluid div:first-child tr:nth-child(${trChild}) td:nth-child(2) .VO_beygingarmynd`;\n}\n\n/**\n * Checks if there are two values in row\n * and parses value from object\n *\n * @param {Function} $ - Cheerio function reference\n * @param {Object} el - Cheerio object instance\n * @returns {String}\n */\nfunction getValuesFromRow($, el) {\n  let rowValue = [];\n\n  if (el.length > 1) {\n    $(el).each((i, e) => {\n      rowValue.push($(e).text());\n    });\n\n    rowValue = rowValue.length > 1 ? rowValue.join(' / ') : rowValue;\n  } else {\n    rowValue = el.text();\n  }\n  return rowValue;\n}\n\n/**\n * Parses name declesions (Beygingar) from html\n *\n * @param {String} html - HTML string\n * @returns {Array<String>} declesionArr\n */\nfunction parseNameDeclensions(html) {\n  const declesionArr = [];\n  const $ = cheerio.load(html, CHEERIO_OPTIONS);\n  // Get declesions table row objects\n  const nfEl = $(getTableRowHtml(4));\n  const þfEl = $(getTableRowHtml(5));\n  const þgfEl = $(getTableRowHtml(6));\n  const efEl = $(getTableRowHtml(7));\n  // Parse text from\n  const nf = getValuesFromRow($, nfEl);\n  const þf = getValuesFromRow($, þfEl);\n  const þgf = getValuesFromRow($, þgfEl);\n  const ef = getValuesFromRow($, efEl);\n  //console.log(nf, þf, þgf, ef);\n  if (nf && þf && þgf && ef) {\n    declesionArr.push(nf, þf, þgf, ef);\n  }\n\n  return declesionArr;\n}\n\n/**\n * Parses, prepares and request name declension data\n *\n * @param {String} html - HTML string\n * @returns {Array<String>|null|Error}\n */\nasync function prepareNameDeclension(html) {\n  let responseVal = null;\n\n  try {\n    const $ = cheerio.load(html, CHEERIO_OPTIONS);\n    const ul = $('ul li');\n\n    if (ul.length > 0) {\n      const id = parseNameDeclensionFirstResponse($, ul);\n      let nextHtml = null;\n\n      if (id) {\n        const url = `http://dev.phpbin.ja.is/ajax_leit.php?q=&id=${id}`;\n        nextHtml = await fetchHTML(url);\n      }\n\n      responseVal = nextHtml ? parseNameDeclensions(nextHtml) : null;\n    } else {\n      responseVal = parseNameDeclensions(html);\n    }\n\n    return responseVal;\n  } catch (error) {\n    return error;\n  }\n}\n\n/**\n * Fetches HTML for Icelandic name declesion (fallbeygingar)\n *\n * @param {String} name - Name string\n * @returns {Array<String>}\n * @example getNameDeclension('Snær') => [´Snær´, ´Snæ´, ´Snæ´, ´Snæs´]\n */\nexport default async function getNameDeclension(name) {\n  try {\n    const url = `http://dev.phpbin.ja.is/ajax_leit.php?q=${encodeURIComponent(name)}`;\n    const html = await fetchHTML(url);\n    const parsedHTML = await prepareNameDeclension(html);\n    return parsedHTML;\n  } catch (error) {\n    return null;\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/services/declensionScraper.js","module.exports = require(\"node-fetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"node-fetch\"\n// module id = 11\n// module chunks = 0","import uuidv3 from 'uuid/v3';\n\n// Note: Custom namespaces should be a UUID string specific to your application!\n// E.g. the one here was generated using this modules `uuid` CLI.\nconst MY_NAMESPACE_UUID = '1b671a64-40d5-491e-99b0-da01ff1f3341';\n\n/**\n * Creates unique ID from string\n * @param {String} str\n * @returns {String} UUID\n * @example createUUID('Name') => 'aca84bc6-021c-3169-a634-52a2761f2ad6'\n */\nexport default function createUUID(str) {\n  return uuidv3(str, MY_NAMESPACE_UUID);\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/createUUID.js","module.exports = require(\"uuid/v3\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"uuid/v3\"\n// module id = 13\n// module chunks = 0","import splitToChunks from '../utils/splitToChunks';\n\nexport default async function delayPromiseBatches(promises, chunkSize, delayMs) {\n  try {\n    const promisesInChunks = splitToChunks(promises, chunkSize);\n    const resolvedPromiseChunks = [];\n\n    for (let i = 0; i < promisesInChunks.length; i += 1) {\n      await new Promise(resolve => setTimeout(resolve, delayMs));\n      const tempChunkValues = await Promise.all(promisesInChunks[i]);\n      resolvedPromiseChunks.push(tempChunkValues);\n      console.log(i, promisesInChunks[i].length);\n    }\n\n    const mergedList = [].concat.apply([], resolvedPromiseChunks);\n    return mergedList;\n  } catch (error) {\n    console.log(error);\n    return new Error(error);\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/delayPromiseBatches.js","/**\n * Splits array into chunks\n * For example splitToChunks([1,2,3,4,5,6,7,8,9], 3)\n *\n * @param {Array} array - Array of anything\n * @param {Number} chunk - Size of chunk\n * @returns {Array<Array>}\n * @example splitToChunks([1,2,3,4,5,6,7,8,9], 3) => [[1,2,3],[4,5,6],[7,8,9]]\n */\nexport default function splitToChunks(arr, chunk) {\n  const chunkArr = [];\n\n  for (var i = 0; i < arr.length; i = i + chunk) {\n    chunkArr.push(arr.slice(i, i + chunk));\n  }\n\n  return chunkArr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/splitToChunks.js","import { Pool } from 'pg';\nimport config from '../config';\n\nconst {\n  DB_USER,\n  DB_HOST,\n  DB_DATABASE,\n  DB_PASSWORD,\n  DB_PORT\n} = config;\n\n// Set connection options for Postgresql\nconst pool = new Pool({\n  user: DB_USER,\n  host: DB_HOST,\n  database: DB_DATABASE,\n  password: DB_PASSWORD,\n  port: DB_PORT,\n});\n\n/**\n * Postgresql pool query for executing queries\n * \n * @param {String} text - Query text\n * @param {Array} params - Query values\n * @returns {Object}\n */\nexport async function dbQuery(text, params) {\n  const start = Date.now();\n\n  try {\n    const { rows } = await pool.query(text, params);\n    await pool.end();\n    const duration = Date.now() - start;\n\n    return { query: text, duration, rows };\n  } catch (error) {\n    return new Error(error);\n  }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/database/index.js","module.exports = require(\"pg\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"pg\"\n// module id = 17\n// module chunks = 0","// Eviromental variables\nimport dotenv from 'dotenv';\n\ndotenv.config();\n\nconst {\n  DB_USER,\n  DB_HOST,\n  DB_DATABASE,\n  DB_PASSWORD,\n  DB_PORT\n} = process.env;\n\nconst config = {\n  DB_USER,\n  DB_HOST,\n  DB_DATABASE,\n  DB_PASSWORD,\n  DB_PORT\n};\n\nexport default config;\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/index.js","module.exports = require(\"dotenv\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"dotenv\"\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}